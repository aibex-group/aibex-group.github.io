{{ $key := .Get 0 }}
{{ $project := index site.Data.projects $key }}

<div class="project-card">
  <div class="project-image">
    <img src="{{ $project.image }}" alt="{{ $project.name }}">
  </div>
  <div class="project-content">
    <h3 class="project-title">{{ $project.name }}</h3>
    <p><strong>Duration:</strong> {{ $project.duration }}</p>
    <p><strong>Grant:</strong> <a href="{{ $project.repo }}" target="_blank">{{ $project.grant }}</a></p>
    <p><strong>Partners:</strong> {{ $project.partners }}</p>

    <p class="project-summary">{{ $project.summary | markdownify }}</p>

    <div class="project-description" style="display:none;">
      {{ $project.description | markdownify }}
    </div>

    <button class="show-more-btn" onclick="toggleDescription(this)">Show more</button>
  </div>
</div>


<script>
function toggleDescription(button) {
  const desc = button.previousElementSibling;
  if (desc.style.display === "none") {
    desc.style.display = "block";
    button.innerText = "Show less";
  } else {
    desc.style.display = "none";
    button.innerText = "Show more";
  }
}
</script>

<style>
.project-content p {
  margin: 0.2rem 0; /* much tighter spacing */
}
.project-card {
  display: flex;
  flex-direction: column;
  background: #f8f8f8;
  border-radius: 12px;
  margin: 2rem 0;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.project-image {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e6eef7;
  padding: 1rem;
}

.project-image img {
  max-width: 200px;
  max-height: 160px;
  object-fit: contain;
}

.project-content {
  padding: 0.6rem;
}

.project-title {
  font-size: 1.4rem;
  margin-bottom: 0.5rem;
}

.project-description {
  margin-top: 0.8rem;
  font-size: 0.95rem;
}
</style>